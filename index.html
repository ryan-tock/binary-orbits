<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Orbits</title>
    <script type="module">
        try {
            const config = await import("./config.js");
            const desmosScript = document.createElement('script');
            desmosScript.src = `https://www.desmos.com/api/v1.11/calculator.js?apiKey=${config.DESMOS_API_KEY}`;
            document.head.appendChild(desmosScript);
        } catch (error) {
            console.log(error);
            alert("No config.js found! See README for details");
        }
    </script>
    <script type="module" src="main.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>  
    <h1>Binary Orbit 3D Visualizer</h1>
     <section>
      <label for="sample-data">
        <input type="checkbox" id="sample-data" checked />
        Use sample data
      </label>
      <br />
      <label for="file-input">Load JSON File:</label>
      <input type="file" id="file-input" accept=".json" />
      <label for="key-dropdown">Select an Orbit:</label>
      <select id="key-dropdown" disabled>
        <option value="">Select an Orbit</option>
      </select>
      <button id="optimize" disabled>Optimize Orbit!</button>
    </section>

    <section>
      <label>Period Bound:</label>
      <input type="text" id="period-low" value="2" size="4" aria-label="Lower period bound (years)" /> yr -
      <input type="text" id="period-high" value="40" size="4" aria-label="Upper period bound (years)" /> yr
    </section>

    <section>
      <fieldset>
        <legend>On Click</legend>
        <label><input type="radio" id="retain-point" name="point-manip" checked /> Do Nothing</label>
        <label><input type="radio" id="remove-point" name="point-manip" /> Remove Point</label>
        <label><input type="radio" id="highlight-point" name="point-manip" /> Highlight Point</label>
        <label><input type="radio" id="flip-x" name="point-manip" /> Negate RA</label>
        <label><input type="radio" id="flip-y" name="point-manip" /> Negate Dec</label>
        <label><input type="radio" id="flip-xy" name="point-manip" /> Negate RA and Dec</label>
      </fieldset>
    </section>

    <div class="aspect-ratio-container">
        <div class="calculator" id="calculator"></div>
    </div>

    <br>
    R Squared of the Fit: <div id="r_squared">0</div>

    <br>
    <button id="download">Download updated data file</button>


    <section>
      <h3>Orbital Parameters</h3>
      <div>
        <label for="semi-major">Semi Major Axis:</label>
        <input type="text" class="parameter" id="semi-major" value="0" /> arcsec
      </div>
      <div>
        <label for="eccentricity">Eccentricity:</label>
        <input type="text" class="parameter" id="eccentricity" value="0" />
      </div>
      <div>
        <label for="inclination">Inclination:</label>
        <input type="text" class="parameter" id="inclination" value="0" /> deg
      </div>
      <div>
        <label for="node">Longitude of Ascending Node:</label>
        <input type="text" class="parameter" id="node" value="0" /> deg
      </div>
      <div>
        <label for="periapsis">Argument of Periapsis:</label>
        <input type="text" class="parameter" id="periapsis" value="0" /> deg
      </div>Add commentMore actions
      <div>
        <label for="mean-anomaly">Mean Anomaly at Epoch:</label>
        <input type="text" class="parameter" id="mean-anomaly" value="0" /> deg
      </div>
      <div>
        <label for="period">Period:</label>
        <input type="text" class="parameter" id="period" value="0" /> years
      </div>
    </section>
</body>
</html>
